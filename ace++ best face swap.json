{"last_node_id":39,"last_link_id":54,"nodes":[{"id":2,"type":"DualCLIPLoader","pos":{"0":1448.44287109375,"1":-82.35298156738281},"size":{"0":315,"1":130},"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"CLIP","type":"CLIP","links":[45],"slot_index":0}],"properties":{"Node name for S&R":"DualCLIPLoader"},"widgets_values":["clip_l.safetensors","t5xxl_fp8_e4m3fn.safetensors","flux","default"]},{"id":3,"type":"VAELoader","pos":{"0":2285.210693359375,"1":115.31696319580078},"size":{"0":315,"1":58},"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"VAE","type":"VAE","links":[7,14],"slot_index":0}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["ae.safetensors"]},{"id":8,"type":"InpaintModelConditioning","pos":{"0":2676.263427734375,"1":112.15069580078125},"size":{"0":315,"1":138},"flags":{},"order":19,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":4},{"name":"negative","type":"CONDITIONING","link":6},{"name":"vae","type":"VAE","link":7},{"name":"pixels","type":"IMAGE","link":36},{"name":"mask","type":"MASK","link":37}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[10],"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[11],"slot_index":1},{"name":"latent","type":"LATENT","links":[12],"slot_index":2}],"properties":{"Node name for S&R":"InpaintModelConditioning"},"widgets_values":[true]},{"id":23,"type":"ImageResizeKJ","pos":{"0":2060.5126953125,"1":402.93896484375},"size":{"0":315,"1":266},"flags":{},"order":6,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":24},{"name":"get_image_size","type":"IMAGE","link":null,"shape":7},{"name":"width_input","type":"INT","link":null,"widget":{"name":"width_input"},"shape":7},{"name":"height_input","type":"INT","link":null,"widget":{"name":"height_input"},"shape":7}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[26],"slot_index":0},{"name":"width","type":"INT","links":[28],"slot_index":1},{"name":"height","type":"INT","links":[29],"slot_index":2}],"properties":{"Node name for S&R":"ImageResizeKJ"},"widgets_values":[0,1024,"nearest-exact",true,2,0,0,"disabled"]},{"id":26,"type":"EmptyImage","pos":{"0":2529.126220703125,"1":552.6729736328125},"size":{"0":315,"1":130},"flags":{},"order":10,"mode":0,"inputs":[{"name":"width","type":"INT","link":28,"widget":{"name":"width"}},{"name":"height","type":"INT","link":29,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[32],"slot_index":0}],"properties":{"Node name for S&R":"EmptyImage"},"widgets_values":[512,512,1,0]},{"id":27,"type":"MaskToImage","pos":{"0":3078.04833984375,"1":929.7174072265625},"size":{"0":264.5999755859375,"1":26},"flags":{},"order":16,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":30}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[31],"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"},"widgets_values":[]},{"id":24,"type":"ImageConcanate","pos":{"0":2535.412841796875,"1":398.3172912597656},"size":{"0":315,"1":102},"flags":{},"order":11,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":25},{"name":"image2","type":"IMAGE","link":26}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[36],"slot_index":0}],"properties":{"Node name for S&R":"ImageConcanate"},"widgets_values":["right",true]},{"id":31,"type":"ImageToMask","pos":{"0":3438.9267578125,"1":735.0979614257812},"size":{"0":315,"1":58},"flags":{},"order":18,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":34}],"outputs":[{"name":"MASK","type":"MASK","links":[37],"slot_index":0}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":11,"type":"DifferentialDiffusion","pos":{"0":2339.51416015625,"1":-211.20272827148438},"size":{"0":277.20001220703125,"1":26},"flags":{},"order":8,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":48}],"outputs":[{"name":"MODEL","type":"MODEL","links":[9],"slot_index":0}],"properties":{"Node name for S&R":"DifferentialDiffusion"},"widgets_values":[]},{"id":10,"type":"KSampler","pos":{"0":2650,"1":-222},"size":{"0":315,"1":262},"flags":{},"order":20,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":9},{"name":"positive","type":"CONDITIONING","link":10},{"name":"negative","type":"CONDITIONING","link":11},{"name":"latent_image","type":"LATENT","link":12}],"outputs":[{"name":"LATENT","type":"LATENT","links":[13],"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[44668155122386,"randomize",25,1,"euler","normal",1]},{"id":1,"type":"UNETLoader","pos":{"0":1445.32373046875,"1":-217.3978271484375},"size":{"0":315,"1":82},"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","type":"MODEL","links":[44],"slot_index":0}],"properties":{"Node name for S&R":"UNETLoader"},"widgets_values":["flux1-fill-dev.safetensors","default"]},{"id":7,"type":"FluxGuidance","pos":{"0":2297,"1":-82},"size":{"0":317.4000244140625,"1":58},"flags":{},"order":13,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":3}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[4],"slot_index":0}],"properties":{"Node name for S&R":"FluxGuidance"},"widgets_values":[35]},{"id":9,"type":"ConditioningZeroOut","pos":{"0":2314,"1":31},"size":{"0":317.4000244140625,"1":26},"flags":{},"order":14,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":5}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[6],"slot_index":0}],"properties":{"Node name for S&R":"ConditioningZeroOut"},"widgets_values":[]},{"id":6,"type":"CLIPTextEncode","pos":{"0":1826,"1":-62},"size":{"0":400,"1":200},"flags":{},"order":9,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":47}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[3,5],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["retain the face"]},{"id":28,"type":"ImageConcanate","pos":{"0":3110,"1":617},"size":{"0":315,"1":102},"flags":{},"order":17,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":31},{"name":"image2","type":"IMAGE","link":32}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[34],"slot_index":0}],"properties":{"Node name for S&R":"ImageConcanate"},"widgets_values":["right",true]},{"id":14,"type":"LoadImage","pos":{"0":1614.2760009765625,"1":392.0721435546875},"size":{"0":315,"1":314},"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[24],"slot_index":0},{"name":"MASK","type":"MASK","links":null}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["1739192550485_T9693GVR9W4VGRAYMP8GAJWP10.jpeg","image"]},{"id":15,"type":"LoadImage","pos":{"0":1630,"1":801},"size":{"0":315,"1":314},"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[16],"slot_index":0},{"name":"MASK","type":"MASK","links":null}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["1739192555690_30787340.jpeg","image"]},{"id":37,"type":"LayerMask: SegmentAnythingUltra","pos":{"0":2328,"1":882},"size":{"0":390.5999755859375,"1":270},"flags":{},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":50}],"outputs":[{"name":"image","type":"IMAGE","links":null},{"name":"mask","type":"MASK","links":[49],"slot_index":1}],"properties":{"Node name for S&R":"LayerMask: SegmentAnythingUltra"},"widgets_values":["sam_vit_h (2.56GB)","GroundingDINO_SwinT_OGC (694MB)",0.3,16,0.15,0.99,true,"face,eyes",false],"color":"rgba(27, 80, 119, 0.7)"},{"id":36,"type":"LoadLoraFromHF","pos":{"0":1895,"1":-296},"size":{"0":327.5999755859375,"1":150},"flags":{},"order":5,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":44},{"name":"clip","type":"CLIP","link":45}],"outputs":[{"name":"MODEL","type":"MODEL","links":[48],"slot_index":0},{"name":"CLIP","type":"CLIP","links":[47],"slot_index":1}],"properties":{"Node name for S&R":"LoadLoraFromHF"},"widgets_values":[1,1,"ali-vilab/ACE_Plus","portrait/comfyui_portrait_lora64.safetensors"]},{"id":22,"type":"GrowMaskWithBlur","pos":{"0":2732.09716796875,"1":909.3277587890625},"size":{"0":315,"1":246},"flags":{},"order":15,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":49}],"outputs":[{"name":"mask","type":"MASK","links":[30],"slot_index":0},{"name":"mask_inverted","type":"MASK","links":null}],"properties":{"Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[40,0,true,false,20,1,1,false]},{"id":12,"type":"VAEDecode","pos":{"0":3031.836181640625,"1":-176.23963928222656},"size":{"0":210,"1":46},"flags":{},"order":21,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":13},{"name":"vae","type":"VAE","link":14}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[51],"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":16,"type":"ImageResizeKJ","pos":{"0":1965,"1":880},"size":{"0":315,"1":266},"flags":{},"order":7,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":16},{"name":"get_image_size","type":"IMAGE","link":null,"shape":7},{"name":"width_input","type":"INT","link":null,"widget":{"name":"width_input"},"shape":7},{"name":"height_input","type":"INT","link":null,"widget":{"name":"height_input"},"shape":7}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[25,50],"slot_index":0},{"name":"width","type":"INT","links":[52],"slot_index":1},{"name":"height","type":"INT","links":[53],"slot_index":2}],"properties":{"Node name for S&R":"ImageResizeKJ"},"widgets_values":[0,1024,"nearest-exact",true,2,0,0,"disabled"]},{"id":38,"type":"ImageCrop+","pos":{"0":3392,"1":233},"size":[315,194],"flags":{},"order":22,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":51},{"name":"width","type":"INT","link":52,"widget":{"name":"width"}},{"name":"height","type":"INT","link":53,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[54],"slot_index":0},{"name":"x","type":"INT","links":null},{"name":"y","type":"INT","links":null}],"properties":{"Node name for S&R":"ImageCrop+"},"widgets_values":[256,256,"top-left",0,0]},{"id":39,"type":"SaveImage","pos":{"0":3764,"1":75},"size":[315,270],"flags":{},"order":23,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":54}],"outputs":[],"properties":{},"widgets_values":["ComfyUI"]}],"links":[[3,6,0,7,0,"CONDITIONING"],[4,7,0,8,0,"CONDITIONING"],[5,6,0,9,0,"CONDITIONING"],[6,9,0,8,1,"CONDITIONING"],[7,3,0,8,2,"VAE"],[9,11,0,10,0,"MODEL"],[10,8,0,10,1,"CONDITIONING"],[11,8,1,10,2,"CONDITIONING"],[12,8,2,10,3,"LATENT"],[13,10,0,12,0,"LATENT"],[14,3,0,12,1,"VAE"],[16,15,0,16,0,"IMAGE"],[24,14,0,23,0,"IMAGE"],[25,16,0,24,0,"IMAGE"],[26,23,0,24,1,"IMAGE"],[28,23,1,26,0,"INT"],[29,23,2,26,1,"INT"],[30,22,0,27,0,"MASK"],[31,27,0,28,0,"IMAGE"],[32,26,0,28,1,"IMAGE"],[34,28,0,31,0,"IMAGE"],[36,24,0,8,3,"IMAGE"],[37,31,0,8,4,"MASK"],[44,1,0,36,0,"MODEL"],[45,2,0,36,1,"CLIP"],[47,36,1,6,0,"CLIP"],[48,36,0,11,0,"MODEL"],[49,37,1,22,0,"MASK"],[50,16,0,37,0,"IMAGE"],[51,12,0,38,0,"IMAGE"],[52,16,1,38,1,"INT"],[53,16,2,38,2,"INT"],[54,38,0,39,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.8954302432552526,"offset":[-2725.9290674790877,385.84478697981]},"node_versions":{"comfy-core":"0.3.13","comfyui_segment_anything":"ab6395596399d5048639cdab7e44ec9fae857a93","ComfyUI_essentials":"ef704350e7d44d3dc744d1b386cc65dd3e93a090","ComfyUI-Impact-Pack":"348c3dcb6b3f9e5fe42f184a01df0bb22b7bfc8d","ComfyUI-KJNodes":"9a3434ffa335a16949aa4c3196a2cd37ba7b4876","ComfyUI_Patches_ll":"1acfbbd58848f7f7a40b1e5c7f88d1be876f4938"}},"version":0.4}